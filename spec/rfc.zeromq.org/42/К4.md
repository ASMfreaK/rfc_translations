---
domain: rfc.zeromq.org
shortname: 42/К4
name: Контракт Коллективного Конструирования Кода
status: стабильная
editor: Pieter Hintjens <ph@imatix.com>
translator: Павел Плетенев <cpp.create@gmail.com>
---

Контракт Коллективного Конструирования Кода - это эволюция модели [Fork + Pull Model](https://help.github.com/articles/about-pull-requests/) сайта github.com, направленная на оптимальную модель совместной работы для свободных программных проектов. Это 2 ревизия спецификации К4 и она заменяет rfc.zeromq.org/22/К4.

* Имя: rfc.zeromq.org/spec:42/C4 (42/C4)
* Редактор: Pieter Hintjens <<ph@imatix.com>>
* Переводчик: Павел Плетенев <<cpp.create@gmail.com>>

## Лицензия

Copyright (c) 2009-2016 Редактор.
Copyright (c) 2017 Переводчик.

This Specification is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.

This Specification is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program; if not, see <http://www.gnu.org/licenses>.

## Содержание

К4 предлагает стандартные процессы для внесения вклада в проект, рассмотрения и обуждения улучшений для программных проектов. Он определяет точные технические требования для проектов как руководство по стилю, модульные тесты, `git` и подобные платформы. К4 специфицирует процесс документирования и обуждения проблем, включая поиск консенсуса и простых описаний, использование "pull request" и систематического просмотра кода.

### Язык

Термины "ДОЛЖНО", "ДОЛЖНА", "ДОЛЖНЫ", "ДОЛЖЕН", "ОБЯЗАТЕЛЬНЫЙ", "ОБЯЗАТЕЛЬНО", "СЛЕДУЕТ" (MUST, REQUIRED, SHALL), "НЕ ДОЛЖЕН", НЕ ДОЛЖНА", "НЕ ДОЛЖНЫ", "НЕ СЛЕДУЕТ" (MUST NOT, SHALL NOT), "РЕКОМЕНДОВАНО" (SHOULD, RECOMMENDED), "НЕ РЕКОМЕНДОВАНО" (SHOULD NOT, NOT RECOMMENDED), "МОГУТ", "МОЖЕТ" (MAY, OPTIONAL) в рамках этого документа ДОЛЖНЫ интерпретироваться в соответствии с RFC 2119[1].

## 1. Цели

К4 предназначен для того, чтобы предоставить многоразовую оптимальную модель для проектов открытого программного обеспечения. Для него определены следующие цели:

1. Максимизировать масштаб и разнообразие сообщества вокруг проекта путём снижения сложности для новых Участников и создания масштабируемой модели участия с сильными положительными обратными связями.
1. Снижение зависимостей от ключевых личностей путём разделения разных наборов навыков таким образом, чтобы был бОльший пул компетенции в любой необходимой области.
1. Возможность для проекта развиваться быстрее и точнее за счёт разносторонности процесса принятия решений.
1. Поддержка естественного жизненного цикла версий проекта от экспериментальных до стабильных, с возможностью безопасного экспериментирования, быстрого поиска ошибок и изоляции стабильного кода.
1. Снижение внутренней сложности проектных репозиториев, снижающее тем самым уровень входа для Участников и уменьшающее область поиска ошибок.
1. Улучшить коллективное владение проектом, что повышает экономическую заинтересованность Участников и снижает риск захвата проекта враждебными субъектами.

## 2. Проектирование

### 2.1. Введение

1. Для проекта СЛЕДУЕТ использовать распределённую систему контроля версий git.
1. Проект СЛЕДУЕТ размещать на сайте github.com или его эквиваленте, здесь и далее называемом "Платформа".
1. Для проекта СЛЕДУЕТ использовать систему управления проблемами (issue tracker) Платформы
1. Проекту СЛЕДУЕТ иметь чётко прописанные указания к стилю кода.
1. "Участник" - это человек, желающий предоставить набор исправлений для проекта, которые представляют собой набор коммитов, которые решают какую-либо обнаруженную проблему.
1. "Сопровождающий" - это человек, который включает (merges) патчи в репозиторий. Сопровождающие не являются разработчиками; в их задачу входит только управление процессом.
1. Участникам НЕ СЛЕДУЕТ иметь доступ на запись в репозиторий, если только они не являются Сопровождающими.
1. Сопровождающим СЛЕДУЕТ иметь доступ на запись в реапозиторий.
1. Каждый человек без различий и дискриминаций ДОЛЖЕН иметь право стать Участником на основании данного контракта.

### 2.2. Лицензии и Права собственности

1. Проект ДОЛЖЕН использовать share-alike лицензии, такие как MPLv2, или варианты GPLv3 (GPL, LGPL, AGPL).
1. Все добавления в исходный код проекта ("патчи") ДОЛЖНЫ использовать ту же лицензию.
1. Все патчи являются собственностью их авторов. НЕ ДОЛЖНО быть никаких процессов присвоения авторских прав.
1. Каждый Участник ДОЛЖЕН быть отвественен за включение себя в Список Участников.

### 2.3. Требования к патчам

1. Участники и Сопровождающие ДОЛЖНЫ иметь учётную запись на Платформе и ДОЛЖНЫ использовать их реальные имена или известные ники.
1. Патч ДОЛЖЕН быть минимальным и аккуратным решением на одну выявленную и обсуждённую проблему.
1. Патч ДОЛЖЕН соответсвовать указаниям проекта по стилю кода, если такие определены.
1. Патч ДОЛЖЕН следовать указанию по "Эволюции Публичных Контрактов", определённых ниже.
1. Патч НЕ ДОЛЖЕН включать нетривиального кода из других проектов, если только Участник не является автором этого кода.
1. Патч ДОЛЖЕН собираться и проходить внутрипроектное самотестирование как минимум на одной целевой платформе.
1. Коммит-сообщение Патча ДОЛЖНО содержать: короткую (менее 50 симолов) строку, определяющую ту проблему ("Problem: ..." "Проблема:..."), которая была решена, затем пустую строку и предложенное решение ("Solution: ..." "Решение:...").
1. "Корректный Патч" - такой патч, который отвечает перечисленным выше требованиям.

### 2.4. Процесс Разработки

1. Изменения в проекте ДОЛЖНЫ управлятся на основе следующего алгоритма: сначала выделяются проблемы, затем применяется минимальное и точное решение этих проблем.
1. Для того, чтобы запросить изменение, пользователь ДОЛЖЕН создать проблему(issue) на странице проекта на Платформе.
1. В проблеме(issue) пользователь или Участник ДОЛЖЕН описать проблему, с которой он столкнулся или нашёл.
1. Пользователь или Участник ДОЛЖЕН стремиться к консенсусу между точностью своего наблюдения и ценностью решения проблемы.
1. Пользователи ДОЛЖНЫ создавать проблемы (issue) для сохранения идей, предложений или любых решений проблем, ТОЛЬКО если они явно и ясно документированы и могут быть подтверждены.
1. Таким образом, история выпусков проекта ДОЛЖНА быть списком значимых проблем, которые были отмечены и решены.
1. Для работы над проблемой Участник ДОЛЖЕН создать форк (fork, собственное ответвление) репозитория проекта. Все работы по решению этой проблемы Участник ДОЛЖЕН проводить в собственном ответвлённом репозиторий.
1. Чтобы прислать патч, Участник ДОЛЖЕН создать на Платформе запрос на слияние (pull-request) с основным репозиторием проекта.
1. Участник НЕ ДОЛЖЕН выкладывать свои наборы изменений (commit) напрямую в проект.
1. Если Платформа реализует запросы на слияние(pull-requests) как проблемы (issues), Участник МОЖЕТ прислать запрос на слияние, не создавая отдельную проблему.
1. Для обсуждения патча МОЖНО использовать секции комментариев к запросу на слияние, к коммиту или любые другие.
1. Для принятия или отказа от патча Сопровождающий ДОЛЖЕН использовать интерфейс Платформы.
1. Сопровождающие НЕ ДОЛЖНЫ принимать собственные патчи кроме исключительных случаев, таких как отсутсвие ответа от других Сопровождающих в течение достаточно долгого периода (1-2 дня).
1. Сопровождающие НЕ ДОЛЖНЫ делать оценочные суждения по поводу Корректных Патчей.
1. Сопровождающие ДОЛЖНЫ быстро принимать Корректные Патчи от других Участников.
1. Сопровождающие МОГУТ принять некорректный патч от других Участников с целью (а) закончить беконечное бесцельное обсуждение, (б) сохранить "токсичные" патчи для истории, (в) направить Участника-автора на исправление и улучшение качества патча.
1. Пользователь, создавший проблему, ДОЛЖЕН закрыть её только после проверки работоспособности патча.
1. Любой Участник, имеющие оценочные суждения по поводу патча, ДОЛЖЕН высказывать их через создание собственных.
1. Сопровождающие ДОЛЖНЫ закрывать пользовательские проблемы, оставленные без каких-либо действий на некомфортное временя.


### 2.5. Ветки и Выпуски(Branches and Releases)

1. Проект ДОЛЖЕН иметь одну ветку ("master"), которая содержит все последние изменения и ДОЛЖНА всегда собираться.
1. Проект НЕ ДОЛЖЕН использовать ветки-топики ни для каких целей. Персональные ответвления проектов МОГУТ использовать ветки-топики.
1. Для создания стабильного выпуска Сопровождающий ДОЛЖЕН создать тэг(отметку,tag) в репозитории. Стабильные выпуски ДОЛЖНЫ всегда создаваться из основной ветки (master) репозитория.


### 2.6. Эволюция Публичных Контрактов(Соглашений)

1. Все Публичные Контракты (программные интерфейсы или протоколы) ДОЛЖНЫ документироваться.
1. Все Публичные Контракты ДОЛЖНЫ иметь области для расширения и экспериментов.
1. Патч, который изменяет стабильный Публичный Контракт НЕ ДОЛЖЕН изменять или разрушать работу существующих продуктов. Это возможно ТОЛЬКО в том случае, если существует консенсус о ценности подобного решения.
1. Патч, вносящий новую функциональность ДОЛЖЕН использовать для этого новые имена (новый контракт).
1. Новые контракты ДОЛЖНЫ быть отмечены как "черновики", до тех пор пока они не станут стаблильными и не начнут использоваться реальными пользователями.
1. Старые контракты ДОЛЖНЫ систематически отмечаться как "устаревшие" и заменяться новыми там, где это необходимо.
1. Когда прошло достаточно времени, старые контракты ДОЛЖНЫ удаляться.
1. Старые имена НЕ ДОЛЖНЫ быть использованы снова в новых контрактах.  


### 2.7. Администрация Проектов

1. Основатели проекта ДОЛЖНЫ выступать в качестве "Администраторов" и управлять Сопровождающими проекта.
1. Администраторы ДОЛЖНЫ убедиться в нахождении
1. Участник, который присылает Корректные Патчи, ясно понимает цели проекта и процесс работы, ДОЛЖЕН быть приглашён стать Сопровождающим.
1. Администраторы ДОЛЖНЫ блокировать или банить "плохих актёров" - людей, постоянно создающих трения и неурядицы среди друих, учавствующих в проекте. Блокировка или бан должны происходить только публичного обсуждения, предоставляющего шанс всем сторонам высказаться. "Плохой актёр" - это тот, кто постоянно игнорирует правила и культуру проекта, кто слишком задирист или враждебен или кто агрессивен, но неспособен изменить своё поведения даже после замечаний о нём от других.


## Дальнейшее чтение

* [Модели Аргириса 1 и 2](http://en.wikipedia.org/wiki/Chris_Argyris) - цели К4 схожи со второй моделью Аргириса. Прим. перев.: Модель 2 Аргириса имеет следующие положения (нормали) [(источник)](http://omsklions.ru/publ/istorija_ehkonomiki_i_menedzhmenta/teorija_i_praktika_menedzhmenta/kris_argiris_ob_oshibkakh_v_povedenii_menedzherov_i_ikh_rukovoditelej_o_dvukh_modeljakh_sluzhebnogo_vzaimodejstvija_dlja_razvitija_kompanij/2-1-0-15):
    * Действуйте на основе правильной информации и будьте открыты для её получения;
    * Действуйте после свободного и информированного выбора, в котором принимают участие все обладающие компетенцией и имеющие отношение к этому;
    * Порождайте внутреннюю причастность к выбору с контролем выполнения и готовности к изменениям.
* [Toyota Kata](http://en.wikipedia.org/wiki/Toyota_Kata) - К4 покрывает Кату Улучения (решение проблем одна за другой) и Кату Тренерства (помощь другим в освоении Каты Улучения)


## Реализации

* [Сообщество ZeroMQ](http://zeromq.org) использует К4 для многих проектов.
* [OSSEC](http://www.ossec.net/) [использует процесс К4](https://ossec-docs.readthedocs.org/en/latest/development/oRFC/orfc-1.html).
* Сообщество [Machinekit](http://www.machinekit.io/) [использует процесс К4.](http://www.machinekit.io/about/).
